<!-- File: fdc-tier1-module.html -->
<!--
  Summary:
  This is the FDC Tier 1 module dashboard, offering logic exploration, overlays, and submission tools for approved NDA users.
  All content is loaded dynamically post token validation.
-->

<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FDC Tier 1 Module | Moleculogic</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/scripts/fdc-validator.js"></script>
  <script src="/scripts/fdc-overlays.js"></script>
  <script src="/scripts/fdc-submit.js"></script>
</head>
<body class="bg-gray-950 text-gray-100">
  <div id="header"></div>

  <main class="max-w-6xl mx-auto p-6">
    <div id="fdcTabs" class="mb-6 border-b border-gray-700">
      <nav class="flex space-x-4">
        <button onclick="showTab('explorer')" class="tab-active">Blueprint Explorer</button>
        <button onclick="showTab('simulator')">Ligand Simulator</button>
        <button onclick="showTab('docs')">Documentation</button>
      </nav>
    </div>

    <div id="explorerTab" class="tab-content">
      <h2 class="text-xl font-bold mb-2">Blueprint Explorer</h2>
      <textarea id="fdcInput" class="w-full h-40 p-2 bg-gray-800 text-white rounded mb-4" placeholder="Paste your FDC JSON here..."></textarea>
      <div class="flex space-x-3">
        <button onclick="validateBlueprintInput('fdcInput', 'fdcOutput')" class="bg-blue-600 px-4 py-2 rounded">Validate</button>
        <button onclick="saveBlueprintToLocal('fdcInput')" class="bg-green-600 px-4 py-2 rounded">Save</button>
        <button onclick="loadBlueprintHistory('fdcHistory')" class="bg-gray-600 px-4 py-2 rounded">Load History</button>
      </div>
      <div id="fdcOutput" class="mt-4 text-sm"></div>
      <div id="fdcHistory" class="mt-6 text-xs"></div>
    </div>

    <div id="simulatorTab" class="tab-content hidden">
      <h2 class="text-xl font-bold mb-2">Ligand Simulator</h2>
      <div class="bg-gray-900 p-4 rounded">
        <p class="text-sm text-gray-300">Simulate behavior of ligands under varying conditions (pH, ROS, ionic strength).</p>
        <button onclick="runLigandSimulation()" class="mt-3 bg-purple-600 px-4 py-2 rounded">Run Simulation</button>
        <div id="simResult" class="mt-4 text-xs"></div>
      </div>
    </div>

    <div id="docsTab" class="tab-content hidden">
      <h2 class="text-xl font-bold mb-2">FDC Documentation</h2>
      <ul class="list-disc pl-6 text-sm">
        <li>All inputs must follow Moleculogic Tier 1 JSON Schema</li>
        <li>Each blueprint must include <code>fdc_id</code>, <code>session_name</code>, <code>logic_block</code></li>
        <li>Refer to <a href="/docs/fdc-schema.pdf" class="underline">FDC Logic Schema v1.0</a></li>
      </ul>
    </div>
  </main>

  <div id="footer"></div>

  <script>
    fetch('/metaldrug.com/includes/header.html').then(r => r.text()).then(d => document.getElementById('header').innerHTML = d);
    fetch('/metaldrug.com/includes/footer.html').then(r => r.text()).then(d => document.getElementById('footer').innerHTML = d);

    function showTab(tabId) {
      document.querySelectorAll('.tab-content').forEach(e => e.classList.add('hidden'));
      document.getElementById(tabId + 'Tab').classList.remove('hidden');
      document.querySelectorAll('#fdcTabs button').forEach(btn => btn.classList.remove('tab-active'));
      document.querySelector(`#fdcTabs button[onclick="showTab('${tabId}')"]`).classList.add('tab-active');
    }
  </script>

  <style>
    .tab-active {
      border-b-2 border-indigo-500 text-indigo-500 pb-1 font-semibold;
    }
  </style>
</body>
</html>